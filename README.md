# Vulnerability-Interstellar-eth

## 🏹基于以太坊共享协作式漏洞处理平台-VI🏹

> 项目源地址：https://github.com/Wangert/Vulnerability-Interstellar



### 背景介绍

本项目基于原来的项目进行修改和完善，将之前采用的第三方联盟链改为通用性更强的以太坊，并修复Solidity合约不兼容的地方和IPFS 文件下载失败的问题。同时改变原来的MVC接口的初始化方式，加快了系统的运行速度。

### 核心技术

- 语言:
  Java1.8、Solidity0.4.2、Html5、CSS3
- 框架:
  SpringBoot2.0、Thymeleaf
- 分布式存储:
  IPFS
- 区块链:
  以太坊(V1.9.23)

### 安装文档

下载地址：https://github.com/ipfs/go-ipfs/releases

安装路径： `/usr/local/`

安装流程：
#### IPFS安装

```shell
// 解压
$ tar xvfz go-ipfs_v0.6.0_linux-amd64.tar.gz
// 执行安装
$ cd go-ipfs
$ ./install.sh
```

设置环境变量：

```shell
$ vim /etc/profile

// 输入一下内容
export IPFS_HOME=/usr/local/go-ipfs
export PATH=$IPFS_HOME:$PATH
export IPFS_PATH=$IPFS_HOME/ipfs_data

$ source /etc/profile
```

设置IPFS开机自启动

```shell
$ cd /lib/systemd/system/
$ vim ipfs.service 
// 输入
[Unit]
Description=IPFS
[Service]
ExecStart=/usr/local/bin/ipfs daemon --enable-gc
Environment=export IPFS_PATH=/opt/ipfs  #（手动添加自己的环境变量）
Restart=always
[Install]
WantedBy=multi-user.target

$ service ipfs start
$ sudo systemctl status ipfs.service
$ sudo systemctl enable ipfs.service
```

#### JAVA8 安装

下载地址：

https://www.oracle.com/java/technologies/javase-downloads.html

安装路径：`/usr/local`

安装过程：

```shell
$ tar -zxvf jdk-8u241-linux-x64.tar.gz
$ mv jdk1.8.0_241/ java
```

设置环境变量：

```shell
$ vim /etc/profile

// 输入一下内容
export JAVA_HOME=/usr/local/java
export PATH=$JAVA_HOME/bin:$PATH

$ source /etc/profile
```

#### 以太坊 安装和搭建

下载地址：

 https://geth.ethereum.org/downloads/

安装路径：`/usr/local`

安装：

```shell
$ tar -xvf geth-linux-amd64-1.9.23-8c2f2715.tar.gz
$ mv geth-linux-amd64-1.9.23-8c2f2715 geth
```

设置环境变量：

```shell
$ vim /etc/profile

export GETH_HOME=/usr/local/geth
export PATH=$GETH_HOME:$PATH

$ source /etc/profile
```

使用：

```shell
// 创建数据路径
$ mkdir /usr/local/src/gethtest

// 启动以太坊
$ geth --rpc --rpccorsdomain="*" --rpcapi web3,eth,debug,personal,net --vmdebug --datadir /usr/local/src/gethtest/data1 --dev --rpc.allow-unprotected-txs
```

####  漏洞星际项目安装

使用maven导出项目Jar包

```
maven build vhw-0.0.1-SNAPSHOT.jar
```

将jar包和项目resource文件导入到服务器

```shell
导入路径
/usr/local/src/vi
```

项目结构：

````
.
├── geth.out
├── nohup.out
├── src
│   └── main
│       └── resources
├── startgeth.sh
├── startvhw.sh
├── vhw-0.0.1-SNAPSHOT.jar
└── vhw-0.0.1-SNAPSHOT.jar.original
````

以太坊启动脚本:

```shell
$ vim startgeth.sh

geth --rpc --rpccorsdomain="*" --rpcapi web3,eth,debug,personal,net --vmdebug --datadir /usr/local/src/gethtest/data1 --dev --rpc.allow-unprotected-txs
```

项目启动脚本:

```shell
$ vim startvhw.sh

// 输入一下内容
#!/usr/bin/env bash
#!/bin/sh
RESOURCE_NAME=vhw-0.0.1-SNAPSHOT.jar
 
tpid=`ps -ef|grep $RESOURCE_NAME|grep -v grep|grep -v kill|awk '{print $2}'`
if [ ${tpid} ]; then
echo 'Stop Process...'
kill -15 $tpid
fi
sleep 5
tpid=`ps -ef|grep $RESOURCE_NAME|grep -v grep|grep -v kill|awk '{print $2}'`
if [ ${tpid} ]; then
echo 'Kill Process!'
kill -9 $tpid
else
echo 'Stop Success!'
fi
 
tpid=`ps -ef|grep $RESOURCE_NAME|grep -v grep|grep -v kill|awk '{print $2}'`
if [ ${tpid} ]; then
    echo 'App is running.'
else
    echo 'App is NOT running.'
fi
 
rm -f tpid
nohup java -jar ./$RESOURCE_NAME  & tail -f nohup.out
echo $! > tpid
echo Start Success!
```

#### 项目启动

````shell
centos7 
账号 root
密码 123456

需要开启两个ssh连接页面

1、第一个ssh连接，启动以太坊
进入项目文件夹
cd /usr/local/src/vi/
./startgeth.sh

2、第二个ssh连接，开启项目
cd /usr/local/src/vi/
./startvhw.sh 

查看日志中的智能合约是否加载成功

3、查看IP地址：
命令 ip addr

4、浏览器输入：
http://虚拟机ip地址:8081
例如：192.168.17.140:8081
````
### 项目展示

- 登录<br/>
  ![Login](https://github.com/Wangert/Vulnerability-Interstellar/blob/master/showFigures/Login.png)
- 注册 <br/>
  ![Regist](https://github.com/Wangert/Vulnerability-Interstellar/blob/master/showFigures/Regist.png)
- 协作<br/>
  ![Assessment](https://github.com/Wangert/Vulnerability-Interstellar/blob/master/showFigures/Technology%20Assessment.png)
- 主页<br/>
  ![HomePage](https://github.com/Wangert/Vulnerability-Interstellar/blob/master/showFigures/HomePage.png)
- 监控 <br/>
  ![Monitor](https://github.com/Wangert/Vulnerability-Interstellar/blob/master/showFigures/Monitor.png)
- 其他<br/>
  ![Page1](https://github.com/Wangert/Vulnerability-Interstellar/blob/master/showFigures/page1.png) <br/>
  ![Page2](https://github.com/Wangert/Vulnerability-Interstellar/blob/master/showFigures/page2.png)







